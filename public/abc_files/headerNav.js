define(["jquery","underscore","jquery.mobile.events","jquery.cookie"],function(o,t){var s;return s=function(){function s(){}var i,n;return n=null,s.get=function(o){return this.options=o,null!=n?n:n=new i(this.options)},i=function(){function s(t){this.options=t,this.options=o.extend({},this.defaults,this.options),this.additionalSelectors(),this.insertMenuTemplate(),this.additionalSelectors(),this.testCookiesCookie(),this.delegateEvents(),this.addClassOnOccasion()}return s.prototype.defaults={_navExpanded:!1,tabletMenuTemplate:"#tabletMenuTemplate",menuToggle:"#controlMenu",menuClose:"#closeNav",mainNav:"#mainNav",navigation:"#navigation",mainHeader:"#mainHeader",headerCallouts:"#headerCallouts",subNavLink:"#mainNav .nav-push",subNav:"#subNav",body:"body",html:"html",document:document,subNavTemplate:"#subNavTemplate",cookieClose:"#cookieClose",subNavList:".sub-nav-list"},s.prototype.delegateEvents=function(){var t;return t=this,this.options.$menuToggle.on("click",function(t){return function(s){return t.additionalSelectors(),s.stopPropagation(),o(".modal-carousel-social-close").trigger("click"),t.options.$mainNav.hasClass("expand")?(t.closeSubNav(),t.options.$headerCallouts.show()):(t.options.$headerCallouts.hide(),t.options._navExpanded=!0,t.options.$mainNav.addClass("expand"),t.options.$menuToggle.addClass("expand"),t.options.$mainHeader.addClass("expand"),t.options.$navigation.addClass("expand"),t.options.$html.addClass("full-nav"))}}(this)),this.options.$menuClose.on("click",function(o){return function(){return o.closeSubNav()}}(this)),this.options.$subNavLink.on("click",function(s){var i;return i=o(this),i.hasClass("expand")?void 0:(s.preventDefault(),t.subNavLinkAction(i))}),this.options.$document.on("click",function(s){return t.options._navExpanded&&o(s.target).is(":not(#navigation *)")&&(t.options.$menuClose.trigger("click"),t.options._navExpanded=!1),!0}),this.options.$cookieClose.on("click",function(o){return o.preventDefault(),t.setCookie()})},s.prototype.testCookiesCookie=function(){var t;return!o.cookie("cookieMessage")&&o(".cookie-message").length&&(this.options.$html.addClass("cookies-flag"),t=o("#header").height(),this.options.$body.css("padding-top",t),this.options.$body.hasClass("is-mobile"))?(t=o("#header").height(),this.options.$body.css("padding-top",t)):void 0},s.prototype.setCookie=function(){var t;return o.cookie("cookieMessage",!0,{expires:365,path:"/"}),this.options.$html.removeClass("cookies-flag"),this.options.$body.hasClass("is-mobile")?(t=o("#header").height(),this.options.$body.css("padding-top",t),o("#breakingNews").css("top",t)):void 0},s.prototype.closeSubNav=function(){return this.options._navExpanded=!1,this.options.$mainNav.removeClass("expand"),this.options.$subNav.removeClass("expand"),this.options.$subNavLink.removeClass("expand"),this.options.$menuToggle.removeClass("expand"),this.options.$mainHeader.removeClass("expand"),this.options.$navigation.removeClass("expand"),this.options.$html.removeClass("full-nav")},s.prototype.subNavLinkAction=function(t){this.options.$mainNav=o("#mainNav"),this.options.$subNavLink=this.options.$mainNav.find(".nav-push"),this.options.$subNav=o("#subNav"),t.hasClass("expand")?(t.removeClass("expand"),this.options.$subNav.removeClass("expand")):(this.options.$body.hasClass("is-mobile")||this.loadSubNav(t),this.options.$subNavLink.removeClass("expand"),t.addClass("expand"),this.options.$subNav.addClass("expand"))},s.prototype.loadSubNav=function(o){var s,i,n,e;return t.templateSettings.variable="rc",s=o.parent(),i=s.data(),n=i.subNavigationJson,e=t.template(this.options.$subNavTemplate.html()),this.options.$subNav.html(e(n))},s.prototype.insertMenuTemplate=function(){var t,s;return t=o("#tabletMenuTemplate"),t.length&&(s=o(t.html()),s.length)?s.insertBefore(t):void 0},s.prototype.addClassOnOccasion=function(){var o;return o=this.options.$subNavList.find(".live-scores-app"),o.length?o.parent("li").addClass(o.attr("class")):void 0},s.prototype.additionalSelectors=function(){return this.options.$menuToggle=o(this.options.menuToggle),this.options.$menuClose=o(this.options.menuClose),this.options.$headerCallouts=o(this.options.headerCallouts),this.options.$mainNav=o(this.options.mainNav),this.options.$navigation=o(this.options.navigation),this.options.$mainHeader=o(this.options.mainHeader),this.options.$subNavLink=o(this.options.subNavLink),this.options.$subNav=o(this.options.subNav),this.options.$body=o(this.options.body),this.options.$html=o(this.options.html),this.options.$document=o(this.options.document),this.options.$subNavTemplate=o(this.options.subNavTemplate),this.options.$cookieClose=o(this.options.cookieClose),this.options.$subNavList=o(this.options.subNavList)},s}(),s}()});