var __bind=function(e,t){return function(){return e.apply(t,arguments)}};define(["jquery","modules/global/moreLink","jquery.mobile.events"],function(e,t){var i;return i=function(){function i(i){this.options=i,this.pagerHeaderVisible=__bind(this.pagerHeaderVisible,this),this.mobileToggleSubNavigationEvent=__bind(this.mobileToggleSubNavigationEvent,this),this.options=e.extend({},this.defaults,this.options),this.additionalSelectors(),this.delegateEvents(),setTimeout(function(){return new t({element:"#subNavigation",navWrap:".header-sub-navigation-list-wrap",navList:".header-sub-navigation-list",wrapperInner:".container",wrapperInnerPadding:31}),new t({wrapperInnerPadding:16})},100)}return i.prototype.defaults={element:"#subNavigation",header:"#header",pageHeader:"#pageHeader",body:"body",mainContainer:"#mainContainer",mobileToggleSubNavigation:"#headerSubNavigationDrawerToggle"},i.prototype.delegateEvents=function(){return e("body").hasClass("is-mobile")?this.options.$element.on("click",this.options.mobileToggleSubNavigation,this.mobileToggleSubNavigationEvent):this.desktopWaypointSubNavigation()},i.prototype.mobileToggleSubNavigationEvent=function(){return this.options.$element.toggleClass("dropdown-on")},i.prototype.desktopWaypointSubNavigation=function(){return e(window).on("load scroll resize",this.pagerHeaderVisible)},i.prototype.pagerHeaderVisible=function(){var t,i,o,n;return this.additionalSelectors(),this.options.$pageHeader.length&&this.options.$element.length?(t=parseInt(this.options.$pageHeader.css("padding-top"))+(this.options.$pageHeader.height()-this.options.$pageHeader.find("#filterControl + #filterHolder").outerHeight()),i=this.options.$pageHeader.offset().top-this.options.$header.outerHeight()+(t-this.options.$element.outerHeight()),o=window.pageYOffset,o>=i?this.options.$body.addClass("fixed-sub-navigation"):this.options.$body.removeClass("fixed-sub-navigation"),n=this.options.$header.innerHeight(),e("html").hasClass("cookies-flag")&&(n+=e(".cookie-message").innerHeight()),this.options.$element.css({top:n})):void 0},i.prototype.additionalSelectors=function(){return this.options.$element=e(this.options.element),this.options.$mainContainer=e(this.options.mainContainer),this.options.$header=e(this.options.header),this.options.$pageHeader=e(this.options.pageHeader),this.options.$body=e(this.options.body)},i}()});