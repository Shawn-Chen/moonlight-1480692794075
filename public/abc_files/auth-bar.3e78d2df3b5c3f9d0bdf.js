webpackJsonp([6],{0:function(e,t,n){e.exports=function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={exports:{},id:r,loaded:!1};return e[r].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";var r=n(1);r.polyfill(),n(2);var i=n(3),o=n(4),a=n(5),s=n(6);window.Vixlet=window.Vixlet||{},window.Vixlet.eventApi=a({}),o.render(i.createElement(s,null),document.getElementById("authApp"))},function(e,t){e.exports=n(35)},function(e,t){e.exports=n(36)},function(e,t){e.exports=n(4)},function(e,t){e.exports=n(25)},function(e,t){e.exports=n(28)},function(e,t,n){"use strict";var r=n(3),i=n(7),o=n(8)(),a=n(9),s=r.createClass({displayName:"AuthBar",getInitialState:function(){return{user:null,textMode:!1,darkMode:!1,brandMode:!1,logoRightAlign:!1}},initWidget:function(){var e={containerId:"authApp",minHeight:0,maxHeight:void 0,xdmHandlers:{trigger:function(e){Vixlet.eventApi.emit(e.name,e.params)},"parent:style":function(e){Vixlet.utils.injectStyle(e)},userData:function(e){this.setState({user:e}),this.getUserProfile()}.bind(this)}};o.initWidget(e),o.on("auth:loginSuccess",function(e){this.setState({user:e.userData})}.bind(this)),o.on("auth:signout",function(){setTimeout(function(){this.setState({user:null})}.bind(this),250)}.bind(this));var t=i.dataAttribute,n=t["vix-mode"],r=t["vix-color-mode"],a=t["vix-logo-align"];this.setState({textMode:"string"==typeof n&&n.match(/text/i),darkMode:"string"==typeof r&&r.match(/dark/i),brandMode:i.brandedAuthBar,logoRightAlign:"string"==typeof a&&a.match(/right/i)})},getUserProfile:function(){fetch(i.userProfileUrl,{headers:{Authorization:"Bearer "+this.state.user.token}}).then(function(e){if(401===e.status)throw new Error("unauthorized");if(!e.ok)throw new Error("bad request");return e.json()}).then(function(e){e.token=this.state.user.token,this.setState({user:e})}.bind(this)).catch(function(e){"unauthorized"===e.message&&this.logout()})},login:function(){o.trigger("auth:login")},logout:function(){o.trigger("auth:signout")},componentWillMount:function(){this.initWidget()},showNewsletterPreferences:function(){var e=this.state.user;e.fromAuthBar=!0,this.setState({user:e}),o.trigger("auth:newsletterPreferences",this.state.user)},render:function(){return r.createElement("div",null,r.createElement(a,{user:this.state.user,login:this.login,logout:this.logout,logoRightAlign:this.state.logoRightAlign,textMode:this.state.textMode,darkMode:this.state.darkMode,brandMode:this.state.brandMode,showNewsletterPreferences:this.showNewsletterPreferences}))}});e.exports=s},function(e,t){e.exports=n(8)},function(e,t){e.exports=n(15)},function(e,t,n){"use strict";var r=n(3),i=n(7),o=function(e){return"images/"+i.brandName+"/authBar_brand_horizontal_"+e+".png"},a=r.createClass({displayName:"LoginComponent",render:function(){var e="Log In",t="btn-text pointer";return r.createElement("div",{className:"content-wrap"},r.createElement("div",{id:"login-with-vixlet",className:t,onClick:this.props.login},e))}}),s=r.createClass({displayName:"LoggedInComponent",render:function(){return 10===i.domainId?r.createElement("div",{className:"content-wrap"},r.createElement("div",{className:"vix-auth-pane"},r.createElement("span",{className:"vix-authbar-username pointer",onClick:this.props.showNewsletterPreferences},"Account"))):r.createElement("div",{className:"content-wrap"},r.createElement("div",{className:"vix-auth-pane"},r.createElement("span",{className:"vix-authbar-username"},this.props.user.username),r.createElement("div",{className:"divisor secondary"}),r.createElement("div",{className:"btn vix-auth-logout-btn pointer",onClick:this.props.logout},"Log Out")))}}),l=r.createClass({displayName:"StandardBar",render:function(){var e="vix-authbar-body",t=o(this.props.textMode&&!this.props.darkMode?"accent":"white");this.props.textMode&&(e+=" text-mode"),this.props.darkMode&&(e+=" dark-mode"),e+=" brand-mode";var n,l=r.createElement("a",{href:i.baseUrl,target:"_blank",className:"brand-icon"},r.createElement("img",{src:t,alt:""}));return this.props.user?(e+=" logged-in",n=r.createElement(s,{user:this.props.user,logout:this.props.logout,showNewsletterPreferences:this.props.showNewsletterPreferences,textMode:this.props.textMode})):n=r.createElement(a,{login:this.props.login,textMode:this.props.textMode}),r.createElement("div",{className:e},l,n)}});e.exports=l}])},8:function(e,t,n){var r=n(13)("libwidgets:conf"),i=function(e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var t=new RegExp("[\\?&]"+e+"=([^&#]*)","i"),n=t.exec(window.location.search);return null===n?"":"vix"===e?decodeURIComponent(n[1]):decodeURIComponent(n[1].replace(/\+/g," "))},o=JSON.parse(window.atob(i("vix"))),a=o.vixletConfig||{};a.instanceId=o.instanceId,a.dataAttribute=o.dataAttribute,a.loadMethod=o.loadMethod,r.log("VixletConf:",a),a.authUrl=a.apiBaseUrl+"/oauth/token",a.recoverUrl=a.apiBaseUrl+"/oauth/password-reset",a.changeUrl=a.apiBaseUrl+"/oauth/password-reset",a.registerUrl=a.apiBaseUrl+"/user",a.activateUrl=a.apiBaseUrl+"/user/activation",a.checkFacebookUrl=a.apiBaseUrl+"/oauth/token",a.clientSecret=a.clientToken,a.getCommentsUrl=a.apiBaseUrl+"/v4/external/:mfid/comment",a.deleteCommentUrl=a.apiBaseUrl+"/comment/:cid",a.reportCommentUrl=a.apiBaseUrl+"/comment/:cid/report",a.userProfileUrl=a.apiBaseUrl+"/user",a.feedUrl=a.apiBaseUrl+"/feed/media/capsule/:cid?start=0&limit=:mediaPerPage",a.tosUrl=a.apiBaseUrl+"/user/tos",a.silverpopNewsletterUrl=a.apiBaseUrl+"/silverpop/newsletter",e.exports=a},15:function(e,t,n){var r=n(8),i=n(27);window.Vixlet=window.Vixlet||{};var o=function(){var e,t={},n=0,o=function(){try{return window.self!==window.top}catch(e){return!0}},a=function(){var e=r.containerId,t=document.getElementById(e),n=e&&t?t.offsetHeight:r.minHeight;return n},s=function(e){var t=/^((http[s]?:)?\/\/)/;t.test(e)||(e="//"+e);var n=document.createElement("link");n.rel="stylesheet",n.href=e;var r=document.getElementsByTagName("head")[0];r.appendChild(n)},l=function(){if(o()){var e=a();e=Math.max(e,r.minHeight),r.maxHeight>0&&e>r.maxHeight&&(e=r.maxHeight),e!==n&&(n=e,c(e))}},c=function(e){e=e||r.minHeight||0;var t={"child:resize":e+"px"};u(t)};t.initWidget=function(t){if(t){r.containerId=t.containerId,r.minHeight=t.minHeight,r.maxHeight=t.maxHeight;var n=function(){setInterval(l.bind(this),200),t.onReady&&"function"==typeof t.onReady&&t.onReady()},a=function(e){var n=JSON.parse(e),r=t.xdmHandlers;for(var i in r)if(r.hasOwnProperty(i)&&n[i]){var o=r[i];o&&"function"==typeof o&&o(n[i])}};o()&&(e=new i.Socket({remote:window.location.href,onReady:n,onMessage:a}),r.themeCss&&s(r.themeCss),r.noBg&&s(r.noBgCss))}};var u=t.emit=function(t){if(t){var n=JSON.stringify(t);e.postMessage(n)}};return t.on=function(e,t){var n={on:{name:e}};u(n),Vixlet.eventApi.on(e,t)},t.off=function(e,t){var n={off:{name:e}};u(n),Vixlet.eventApi.off(e,t)},t.trigger=function(e,t){t=t||{},t.instanceId=r.instanceId;var n={trigger:{name:e,params:t}};u(n)},t};e.exports=o}});